<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' http: https:" />
  <title>Spaztick</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
    <div class="main-area">
    <aside id="left-panel" class="panel left-panel">
      <div class="panel-header navigator-header">
        <button type="button" id="navigator-refresh-btn" class="icon-btn" title="Refresh" aria-label="Refresh navigator">
          <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M4.06189 13C4.02104 12.6724 4 12.3387 4 12C4 7.58172 7.58172 4 12 4C14.5006 4 16.7332 5.14727 18.2002 6.94416M19.9381 11C19.979 11.3276 20 11.6613 20 12C20 16.4183 16.4183 20 12 20C9.61061 20 7.46589 18.9525 6 17.2916M9 17H6V17.2916M18.2002 4V6.94416M18.2002 6.94416V6.99993L15.2002 7M6 20V17.2916"/></svg>
        </button>
        <h2>Navigator</h2>
      </div>
      <nav class="panel-content">
        <button type="button" id="inbox-item" class="nav-inbox-row" data-type="inbox" title="Tasks with no project" aria-label="Inbox">
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M4 14H6.67452C7.1637 14 7.40829 14 7.63846 14.0553C7.84254 14.1043 8.03763 14.1851 8.21657 14.2947C8.4184 14.4184 8.59136 14.5914 8.93726 14.9373L9.06274 15.0627C9.40865 15.4086 9.5816 15.5816 9.78343 15.7053C9.96237 15.8149 10.1575 15.8957 10.3615 15.9447C10.5917 16 10.8363 16 11.3255 16H12.6745C13.1637 16 13.4083 16 13.6385 15.9447C13.8425 15.8957 14.0376 15.8149 14.2166 15.7053C14.4184 15.5816 14.5914 15.4086 14.9373 15.0627L15.0627 14.9373C15.4086 14.5914 15.5816 14.4184 15.7834 14.2947C15.9624 14.1851 16.1575 14.1043 16.3615 14.0553C16.5917 14 16.8363 14 17.3255 14H20M7.2 4H16.8C17.9201 4 18.4802 4 18.908 4.21799C19.2843 4.40973 19.5903 4.71569 19.782 5.09202C20 5.51984 20 6.07989 20 7.2V16.8C20 17.9201 20 18.4802 19.782 18.908C19.5903 19.2843 19.2843 19.5903 18.908 19.782C18.4802 20 17.9201 20 16.8 20H7.2C6.0799 20 5.51984 20 5.09202 19.782C4.71569 19.5903 4.40973 19.2843 4.21799 18.908C4 18.4802 4 17.9201 4 16.8V7.2C4 6.0799 4 5.51984 4.21799 5.09202C4.40973 4.71569 4.71569 4.40973 5.09202 4.21799C5.51984 4 6.0799 4 7.2 4Z" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="nav-section-title-text">Inbox</span>
          <span class="nav-item-count" id="inbox-count"></span>
        </button>
        <section class="nav-section" id="nav-section-favorites" data-section="favorites">
          <button type="button" class="nav-section-header" aria-expanded="true" aria-controls="nav-section-favorites-body">
            <svg class="section-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="14" height="14" aria-hidden="true"><path fill-rule="nonzero" d="M17.5,12 C20.5375661,12 23,14.4624339 23,17.5 C23,20.5375661 20.5375661,23 17.5,23 C14.4624339,23 12,20.5375661 12,17.5 C12,14.4624339 14.4624339,12 17.5,12 Z M12.6728137,2.75963841 L15.3563695,8.20794048 L21.3672771,9.07653583 C21.9828509,9.16548822 22.2288847,9.92194118 21.7834166,10.355994 L20.4150744,11.6887401 C19.9202594,11.4400424 19.3893043,11.2526832 18.8321893,11.1366429 L19.6468361,10.3435066 L14.7508503,9.63602099 C14.5061256,9.60065749 14.2945567,9.44694368 14.1853,9.2251246 L12,4.78840895 L9.81470005,9.2251246 C9.70544328,9.44694368 9.49387437,9.60065749 9.24914969,9.63602099 L4.35428754,10.3433442 L7.89856004,13.7927085 C8.07576033,13.9651637 8.15657246,14.2138779 8.11458106,14.4575528 L7.27468983,19.3314183 L11.0013001,17.3686786 C11.0004347,17.4123481 11,17.4561233 11,17.5 C11,18.0076195 11.0581888,18.5016483 11.1682599,18.9757801 L6.6265261,21.3681981 C6.07605002,21.6581549 5.43223188,21.1903936 5.53789075,20.5772582 L6.56928006,14.5921347 L2.21690124,10.3563034 C1.77102944,9.92237116 2.01694609,9.16551755 2.63272295,9.07653583 L8.6436305,8.20794048 L11.3271863,2.75963841 C11.6020985,2.20149668 12.3979015,2.20149668 12.6728137,2.75963841 Z M17.5,13.9992349 L17.4101244,14.0072906 C17.2060313,14.0443345 17.0450996,14.2052662 17.0080557,14.4093593 L17,14.4992349 L16.9996498,16.9992349 L14.4976498,17 L14.4077742,17.0080557 C14.2036811,17.0450996 14.0427494,17.2060313 14.0057055,17.4101244 L13.9976498,17.5 L14.0057055,17.5898756 C14.0427494,17.7939687 14.2036811,17.9549004 14.4077742,17.9919443 L14.4976498,18 L17.0006498,17.9992349 L17.0011076,20.5034847 L17.0091633,20.5933603 C17.0462073,20.7974534 17.207139,20.9583851 17.411232,20.995429 L17.5011076,21.0034847 L17.5909833,20.995429 C17.7950763,20.9583851 17.956008,20.7974534 17.993052,20.5933603 L18.0011076,20.5034847 L18.0006498,17.9992349 L20.5045655,18 L20.5944411,17.9919443 C20.7985342,17.9549004 20.9594659,17.7939687 20.9965098,17.5898756 L21.0045655,17.5 L20.9965098,17.4101244 C20.9594659,17.2060313 20.7985342,17.0450996 20.5944411,17.0080557 L20.5045655,17 L17.9996498,16.9992349 L18,14.4992349 L17.9919443,14.4093593 C17.9549004,14.2052662 17.7939687,14.0443345 17.5898756,14.0072906 L17.5,13.9992349 Z"/></svg>
            <span class="nav-section-title-text">Favorites</span>
            <svg class="nav-section-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6"/></svg>
          </button>
          <div class="nav-section-body" id="nav-section-favorites-body">
            <ul class="nav-list" id="favorites-list">
              <li class="nav-item placeholder">—</li>
            </ul>
          </div>
        </section>
        <section class="nav-section" id="nav-section-projects" data-section="projects">
          <button type="button" class="nav-section-header" aria-expanded="true" aria-controls="nav-section-projects-body">
            <svg class="section-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 6C2 4.34315 3.34315 3 5 3H7.75093C8.82997 3 9.86325 3.43595 10.6162 4.20888L9.94852 4.85927L10.6162 4.20888L11.7227 5.34484C11.911 5.53807 12.1693 5.64706 12.4391 5.64706H16.4386C18.5513 5.64706 20.281 7.28495 20.4284 9.35939C21.7878 9.88545 22.5642 11.4588 21.977 12.927L20.1542 17.4853C19.5468 19.0041 18.0759 20 16.4402 20H6C4.88522 20 3.87543 19.5427 3.15116 18.8079C2.44035 18.0867 2 17.0938 2 16V6ZM18.3829 9.17647C18.1713 8.29912 17.3812 7.64706 16.4386 7.64706H12.4391C11.6298 7.64706 10.8548 7.3201 10.2901 6.7404L9.18356 5.60444L9.89987 4.90666L9.18356 5.60444C8.80709 5.21798 8.29045 5 7.75093 5H5C4.44772 5 4 5.44772 4 6V14.4471L5.03813 11.25C5.43958 10.0136 6.59158 9.17647 7.89147 9.17647H18.3829ZM5.03034 17.7499L6.94036 11.8676C7.07417 11.4555 7.45817 11.1765 7.89147 11.1765H19.4376C19.9575 11.1765 20.3131 11.7016 20.12 12.1844L18.2972 16.7426C17.9935 17.502 17.258 18 16.4402 18H6C5.64785 18 5.31756 17.9095 5.03034 17.7499Z"/></svg>
            <span class="nav-section-title-text">Projects</span>
            <svg class="nav-section-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6"/></svg>
          </button>
          <div class="nav-section-body" id="nav-section-projects-body">
            <ul class="nav-list" id="projects-list">
              <li class="nav-item placeholder">Loading…</li>
            </ul>
          </div>
        </section>
        <section class="nav-section" id="nav-section-lists" data-section="lists">
          <button type="button" class="nav-section-header" aria-expanded="true" aria-controls="nav-section-lists-body">
            <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005M15 12H12M15 16H12M9 12H9.01M9 16H9.01" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="nav-section-title-text">Lists</span>
            <svg class="nav-section-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6"/></svg>
          </button>
          <div class="nav-section-body" id="nav-section-lists-body">
            <ul class="nav-list" id="lists-list">
              <li class="nav-item placeholder">—</li>
            </ul>
          </div>
        </section>
        <section class="nav-section" id="nav-section-boards" data-section="boards">
          <button type="button" class="nav-section-header" aria-expanded="true" aria-controls="nav-section-boards-body">
            <svg class="section-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="nonzero" d="M18.2513521,2.49820514 C19.9843968,2.49820514 21.4006513,3.85452629 21.4962634,5.56367469 L21.5014083,5.74810161 L21.5008077,17.7519229 C21.5005988,19.5467519 20.0455893,21.0018356 18.2507042,21.0018356 L6.25005624,21.0018356 C4.51701151,21.0018356 3.10075697,19.6455145 3.00514494,17.9363661 L3,17.7519391 L3.00060063,5.74811784 C3.00080955,3.9532889 4.45581897,2.49820514 6.25064792,2.49820514 L18.2513521,2.49820514 Z M11.5,9.49820514 L4.5,9.49920514 L4.50010353,17.7518667 L4.50727563,17.9125936 C4.58838653,18.803788 5.33765319,19.5018356 6.25,19.5018356 L11.5,19.5012051 L11.5,9.49820514 Z M20,15.4982051 L13,15.4992051 L13,19.5012051 L18.2506479,19.5018356 C19.2171619,19.5018356 20.0006952,18.7182622 20.0008077,17.7518046 L20,15.4982051 Z M18.2514083,3.99820514 L13,3.99720514 L13,13.9992051 L20,13.9982051 L20.0013048,5.74817408 L19.9941327,5.58744715 C19.9130218,4.69625278 19.1637551,3.99820514 18.2514083,3.99820514 Z M11.5,3.99720514 L6.25073228,3.99820514 L6.10723072,4.00401666 C5.20785168,4.0770851 4.5007075,4.83010139 4.50060063,5.7482362 L4.5,7.99920514 L11.5,7.99820514 L11.5,3.99720514 Z"/></svg>
            <span class="nav-section-title-text">Boards</span>
            <svg class="nav-section-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6"/></svg>
          </button>
          <div class="nav-section-body" id="nav-section-boards-body">
            <ul class="nav-list" id="boards-list">
              <li class="nav-item placeholder">—</li>
            </ul>
          </div>
        </section>
        <section class="nav-section" id="nav-section-tags" data-section="tags">
          <button type="button" class="nav-section-header" aria-expanded="true" aria-controls="nav-section-tags-body">
            <svg class="section-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 5C4 4.44772 4.44772 4 5 4H11.1716C11.4368 4 11.6911 4.10536 11.8787 4.29289L19.8787 12.2929C20.2692 12.6834 20.2692 13.3166 19.8787 13.7071L13.7071 19.8787C13.3166 20.2692 12.6834 20.2692 12.2929 19.8787L4.29289 11.8787C4.10536 11.6911 4 11.4368 4 11.1716V5ZM5 2C3.34315 2 2 3.34315 2 5L2 11.1716C2 11.9672 2.31607 12.7303 2.87868 13.2929L10.8787 21.2929C12.0503 22.4645 13.9497 22.4645 15.1213 21.2929L21.2929 15.1213C22.4645 13.9497 22.4645 12.0503 21.2929 10.8787L13.2929 2.87868C12.7303 2.31607 11.9672 2 11.1716 2H5ZM8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z"/></svg>
            <span class="nav-section-title-text">Tags</span>
            <svg class="nav-section-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M6 9l6 6 6-6"/></svg>
          </button>
          <div class="nav-section-body" id="nav-section-tags-body">
            <div id="tags-sort-row" class="tags-sort-row hidden" aria-hidden="true">
              <span class="tags-sort-buttons" role="group" aria-label="Sort tags by">
                <button type="button" class="tags-sort-btn" data-sort="name_asc" title="Sort by name A→Z" aria-label="Sort by name A→Z">
                  <svg class="tags-sort-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.22 15.97L9 17.19V5C9 4.59 8.66 4.25 8.25 4.25C7.84 4.25 7.5 4.59 7.5 5V17.19L6.28 15.97C5.99 15.68 5.51 15.68 5.22 15.97C4.93 16.26 4.93 16.74 5.22 17.03L7.72 19.53C7.79 19.6 7.87 19.65 7.96 19.69C8.05 19.73 8.15 19.75 8.25 19.75C8.35 19.75 8.45 19.73 8.54 19.69C8.63 19.65 8.71 19.6 8.78 19.53L11.28 17.03C11.57 16.74 11.57 16.26 11.28 15.97C10.99 15.68 10.51 15.68 10.22 15.97Z" fill="currentColor"/><path d="M14 11.21C14.39 11.35 14.82 11.15 14.96 10.76L15.24 9.98001H17.27L17.55 10.76C17.66 11.07 17.95 11.26 18.26 11.26C18.34 11.26 18.43 11.25 18.51 11.22C18.9 11.08 19.1 10.65 18.96 10.26L17.25 5.47001C17.08 5.04001 16.69 4.76001 16.25 4.76001C15.81 4.76001 15.42 5.04001 15.25 5.49001L13.55 10.26C13.41 10.65 13.61 11.08 14 11.22V11.21ZM16.73 8.48001H15.77L16.25 7.14001L16.73 8.48001Z" fill="currentColor"/><path d="M18.67 13.46C18.48 13.02 18.08 12.75 17.62 12.75H14.51C14.1 12.75 13.76 13.09 13.76 13.5C13.76 13.91 14.1 14.25 14.51 14.25H16.9L14.07 17.2C13.73 17.56 13.64 18.08 13.83 18.54C14.02 18.98 14.42 19.25 14.88 19.25H18.01C18.42 19.25 18.76 18.91 18.76 18.5C18.76 18.09 18.42 17.75 18.01 17.75H15.62L18.44 14.82C18.78 14.46 18.88 13.93 18.68 13.47L18.67 13.46Z" fill="currentColor"/></svg>
                </button>
                <button type="button" class="tags-sort-btn" data-sort="name_desc" title="Sort by name Z→A" aria-label="Sort by name Z→A">
                  <svg class="tags-sort-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.22 15.97L9 17.19V5C9 4.59 8.66 4.25 8.25 4.25C7.84 4.25 7.5 4.59 7.5 5V17.19L6.28 15.97C5.99 15.68 5.51 15.68 5.22 15.97C4.93 16.26 4.93 16.74 5.22 17.03L7.72 19.53C7.79 19.6 7.87 19.65 7.96 19.69C8.05 19.73 8.15 19.75 8.25 19.75C8.35 19.75 8.44 19.73 8.54 19.69C8.63 19.65 8.71 19.6 8.78 19.53L11.28 17.03C11.57 16.74 11.57 16.26 11.28 15.97C10.99 15.68 10.51 15.68 10.22 15.97Z" fill="currentColor"/><path d="M18.96 18.25L17.25 13.46C17.08 13.03 16.69 12.75 16.25 12.75C15.81 12.75 15.42 13.03 15.25 13.48L13.55 18.25C13.41 18.64 13.61 19.07 14 19.21C14.39 19.35 14.82 19.15 14.96 18.76L15.24 17.98H17.27L17.55 18.76C17.66 19.07 17.95 19.26 18.26 19.26C18.34 19.26 18.43 19.25 18.51 19.22C18.9 19.08 19.1 18.65 18.96 18.26V18.25ZM15.77 16.48L16.25 15.14L16.73 16.48H15.77Z" fill="currentColor"/><path d="M13.83 10.54C14.02 10.98 14.42 11.25 14.88 11.25H18.01C18.42 11.25 18.76 10.91 18.76 10.5C18.76 10.09 18.42 9.75001 18.01 9.75001H15.62L18.44 6.82001C18.78 6.46001 18.88 5.93001 18.68 5.47001C18.49 5.03001 18.09 4.76001 17.63 4.76001H14.52C14.11 4.76001 13.77 5.10001 13.77 5.51001C13.77 5.92001 14.11 6.26001 14.52 6.26001H16.91L14.08 9.21001C13.74 9.57001 13.65 10.09 13.84 10.55L13.83 10.54Z" fill="currentColor"/></svg>
                </button>
                <button type="button" class="tags-sort-btn" data-sort="count_asc" title="Sort by number of tasks ascending" aria-label="Sort by task count ascending">
                  <svg class="tags-sort-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.38001 19.75C8.27987 19.7512 8.1805 19.7324 8.08775 19.6946C7.99501 19.6568 7.91077 19.6008 7.84001 19.53L5.34001 17C5.19956 16.8593 5.12067 16.6687 5.12067 16.47C5.12067 16.2712 5.19956 16.0806 5.34001 15.94C5.48357 15.8013 5.67539 15.7238 5.87501 15.7238C6.07462 15.7238 6.26644 15.8013 6.41001 15.94L8.41001 17.94L10.41 15.94C10.5536 15.8013 10.7454 15.7238 10.945 15.7238C11.1446 15.7238 11.3364 15.8013 11.48 15.94C11.6205 16.0806 11.6993 16.2712 11.6993 16.47C11.6993 16.6687 11.6205 16.8593 11.48 17L8.98001 19.5C8.90562 19.5846 8.8129 19.6511 8.70893 19.6944C8.60495 19.7377 8.49245 19.7567 8.38001 19.75Z" fill="currentColor"/><path d="M8.38 19.75C8.18015 19.75 7.98834 19.6713 7.8461 19.5309C7.70386 19.3906 7.62262 19.1998 7.62 19V5C7.62262 4.80017 7.70386 4.60942 7.8461 4.46905C7.98834 4.32868 8.18015 4.24998 8.38 4.25C8.57717 4.25263 8.76538 4.33281 8.90387 4.47317C9.04237 4.61354 9.12001 4.80281 9.12 5V19C9.12001 19.1972 9.04237 19.3865 8.90387 19.5268C8.76538 19.6672 8.57717 19.7474 8.38 19.75Z" fill="currentColor"/><path d="M17.12 11.25C16.9228 11.2473 16.7346 11.1672 16.5961 11.0268C16.4576 10.8864 16.38 10.6972 16.38 10.5V6.43996L16 6.65996C15.825 6.75676 15.6186 6.78007 15.4264 6.72474C15.2342 6.66942 15.0718 6.54 14.975 6.36496C14.8782 6.18992 14.8549 5.98359 14.9102 5.79136C14.9655 5.59914 15.095 5.43676 15.27 5.33996L15.92 4.99996C16.0943 4.87274 16.2999 4.7953 16.5148 4.77593C16.7297 4.75655 16.9458 4.79597 17.14 4.88996C17.3633 4.99521 17.5518 5.16234 17.6829 5.3715C17.8141 5.58067 17.8825 5.82308 17.88 6.06996V10.5C17.8774 10.6998 17.7961 10.8905 17.6539 11.0309C17.5117 11.1713 17.3198 11.25 17.12 11.25Z" fill="currentColor"/><path d="M16.62 17.25C16.1754 17.248 15.7414 17.1144 15.3727 16.8659C15.004 16.6175 14.7172 16.2654 14.5484 15.8541C14.3797 15.4428 14.3365 14.9907 14.4245 14.5549C14.5124 14.1191 14.7275 13.7192 15.0425 13.4055C15.3576 13.0918 15.7585 12.8785 16.1947 12.7925C16.6309 12.7065 17.0828 12.7516 17.4933 12.9222C17.9039 13.0928 18.2547 13.3812 18.5015 13.751C18.7483 14.1208 18.88 14.5554 18.88 15C18.8813 15.2967 18.8237 15.5907 18.7105 15.8649C18.5973 16.1392 18.4307 16.3882 18.2204 16.5975C18.0102 16.8068 17.7604 16.9723 17.4857 17.0843C17.2109 17.1963 16.9167 17.2526 16.62 17.25ZM16.62 14.25C16.4211 14.25 16.2303 14.329 16.0897 14.4696C15.949 14.6103 15.87 14.8011 15.87 15C15.87 15.1989 15.949 15.3897 16.0897 15.5303C16.2303 15.671 16.4211 15.75 16.62 15.75C16.8189 15.75 17.0097 15.671 17.1503 15.5303C17.291 15.3897 17.37 15.1989 17.37 15C17.37 14.8011 17.291 14.6103 17.1503 14.4696C17.0097 14.329 16.8189 14.25 16.62 14.25Z" fill="currentColor"/><path d="M16.11 19.25H15.62C15.4211 19.25 15.2303 19.171 15.0897 19.0303C14.949 18.8897 14.87 18.6989 14.87 18.5C14.87 18.3011 14.949 18.1103 15.0897 17.9697C15.2303 17.829 15.4211 17.75 15.62 17.75H16.11C16.4292 17.7433 16.7344 17.6175 16.9657 17.3974C17.197 17.1772 17.3376 16.8785 17.36 16.56C17.36 16.27 17.36 15.92 17.36 15.5V15C17.36 14.8028 17.4376 14.6135 17.5761 14.4732C17.7146 14.3328 17.9028 14.2526 18.1 14.25C18.2998 14.25 18.4916 14.3287 18.6339 14.4691C18.7761 14.6094 18.8574 14.8002 18.86 15V15.5C18.86 15.95 18.86 16.32 18.86 16.64C18.8147 17.3415 18.5063 18 17.9964 18.4839C17.4866 18.9678 16.8129 19.2414 16.11 19.25Z" fill="currentColor"/></svg>
                </button>
                <button type="button" class="tags-sort-btn" data-sort="count_desc" title="Sort by number of tasks descending" aria-label="Sort by task count descending">
                  <svg class="tags-sort-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.38001 19.75C8.27987 19.7512 8.1805 19.7324 8.08775 19.6946C7.99501 19.6568 7.91077 19.6008 7.84001 19.53L5.34001 17C5.19956 16.8593 5.12067 16.6687 5.12067 16.47C5.12067 16.2712 5.19956 16.0806 5.34001 15.94C5.48357 15.8013 5.67539 15.7238 5.87501 15.7238C6.07462 15.7238 6.26644 15.8013 6.41001 15.94L8.41001 17.94L10.41 15.94C10.5536 15.8013 10.7454 15.7238 10.945 15.7238C11.1446 15.7238 11.3364 15.8013 11.48 15.94C11.6205 16.0806 11.6993 16.2712 11.6993 16.47C11.6993 16.6687 11.6205 16.8593 11.48 17L8.98001 19.5C8.90562 19.5846 8.8129 19.6511 8.70893 19.6944C8.60495 19.7377 8.49245 19.7567 8.38001 19.75Z" fill="currentColor"/><path d="M8.38001 19.75C8.18017 19.75 7.98836 19.6713 7.84611 19.5309C7.70387 19.3906 7.62264 19.1998 7.62001 19V5C7.62264 4.80017 7.70387 4.60942 7.84611 4.46905C7.98836 4.32868 8.18017 4.24998 8.38001 4.25C8.57718 4.25263 8.76539 4.33281 8.90389 4.47317C9.04238 4.61354 9.12003 4.80281 9.12001 5V19C9.12003 19.1972 9.04238 19.3865 8.90389 19.5268C8.76539 19.6672 8.57718 19.7474 8.38001 19.75Z" fill="currentColor"/><path d="M17.12 19.2499C16.9228 19.2473 16.7346 19.1671 16.5961 19.0268C16.4576 18.8864 16.38 18.6971 16.38 18.4999V14.4399L15.99 14.6599C15.815 14.7567 15.6086 14.78 15.4164 14.7247C15.2242 14.6694 15.0618 14.54 14.965 14.3649C14.8682 14.1899 14.8449 13.9836 14.9002 13.7913C14.9555 13.5991 15.085 13.4367 15.26 13.3399L15.92 12.9799C16.0943 12.8527 16.2999 12.7753 16.5148 12.7559C16.7297 12.7365 16.9458 12.7759 17.14 12.8699C17.3633 12.9752 17.5518 13.1423 17.683 13.3515C17.8141 13.5606 17.8825 13.8031 17.88 14.0499V18.4999C17.8774 18.6998 17.7962 18.8905 17.6539 19.0309C17.5117 19.1713 17.3199 19.25 17.12 19.2499Z" fill="currentColor"/><path d="M16.62 9.24998C16.1754 9.248 15.7414 9.11437 15.3727 8.86593C15.004 8.6175 14.7172 8.26541 14.5484 7.85411C14.3797 7.44281 14.3365 6.99072 14.4245 6.55493C14.5124 6.11913 14.7275 5.71916 15.0425 5.40549C15.3576 5.09182 15.7585 4.87852 16.1947 4.79251C16.6309 4.7065 17.0828 4.75164 17.4933 4.92222C17.9039 5.09281 18.2547 5.3812 18.5015 5.75099C18.7483 6.12078 18.88 6.5554 18.88 6.99998C18.8813 7.29667 18.8237 7.59067 18.7105 7.86491C18.5973 8.13915 18.4307 8.38817 18.2204 8.5975C18.0102 8.80683 17.7604 8.9723 17.4857 9.08431C17.2109 9.19632 16.9167 9.25263 16.62 9.24998ZM16.62 6.24998C16.4211 6.24998 16.2303 6.329 16.0897 6.46965C15.949 6.6103 15.87 6.80107 15.87 6.99998C15.87 7.19889 15.949 7.38966 16.0897 7.53031C16.2303 7.67096 16.4211 7.74998 16.62 7.74998C16.8189 7.74998 17.0097 7.67096 17.1503 7.53031C17.291 7.38966 17.37 7.19889 17.37 6.99998C17.37 6.80107 17.291 6.6103 17.1503 6.46965C17.0097 6.329 16.8189 6.24998 16.62 6.24998Z" fill="currentColor"/><path d="M16.11 11.25H15.62C15.4211 11.25 15.2303 11.171 15.0897 11.0303C14.949 10.8897 14.87 10.6989 14.87 10.5C14.87 10.3011 14.949 10.1103 15.0897 9.96967C15.2303 9.82902 15.4211 9.75 15.62 9.75H16.11C16.4293 9.7433 16.7345 9.61752 16.9657 9.39735C17.197 9.17719 17.3376 8.87853 17.36 8.56C17.36 8.27 17.36 7.92 17.36 7.5V7C17.36 6.80281 17.4376 6.61354 17.5761 6.47317C17.7146 6.33281 17.9028 6.25263 18.1 6.25C18.2999 6.24998 18.4917 6.32868 18.6339 6.46905C18.7761 6.60942 18.8574 6.80017 18.86 7V7.5C18.86 7.95 18.86 8.32 18.86 8.64C18.817 9.34229 18.5093 10.0022 17.999 10.4865C17.4886 10.9709 16.8136 11.2437 16.11 11.25Z" fill="currentColor"/></svg>
                </button>
              </span>
            </div>
            <ul class="nav-list" id="tags-list">
              <li class="nav-item placeholder">—</li>
            </ul>
          </div>
        </section>
      </nav>
      <div class="left-panel-footer">
        <button type="button" id="navigator-edit-btn" class="navigator-edit-btn" title="Edit order and delete" aria-label="Edit navigator">
          <svg class="navigator-edit-icon" viewBox="0 0 15 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 8.5L4.14645 8.14645L4 8.29289V8.5H4.5ZM8.5 4.5L8.85355 4.14645C8.65829 3.95118 8.34171 3.95118 8.14645 4.14645L8.5 4.5ZM10.5 6.5L10.8536 6.85355C11.0488 6.65829 11.0488 6.34171 10.8536 6.14645L10.5 6.5ZM6.5 10.5V11H6.70711L6.85355 10.8536L6.5 10.5ZM4.5 10.5H4C4 10.7761 4.22386 11 4.5 11V10.5ZM7.5 14C3.91015 14 1 11.0899 1 7.5H0C0 11.6421 3.35786 15 7.5 15V14ZM14 7.5C14 11.0899 11.0899 14 7.5 14V15C11.6421 15 15 11.6421 15 7.5H14ZM7.5 1C11.0899 1 14 3.91015 14 7.5H15C15 3.35786 11.6421 0 7.5 0V1ZM7.5 0C3.35786 0 0 3.35786 0 7.5H1C1 3.91015 3.91015 1 7.5 1V0ZM4.85355 8.85355L8.85355 4.85355L8.14645 4.14645L4.14645 8.14645L4.85355 8.85355ZM8.14645 4.85355L10.1464 6.85355L10.8536 6.14645L8.85355 4.14645L8.14645 4.85355ZM10.1464 6.14645L6.14645 10.1464L6.85355 10.8536L10.8536 6.85355L10.1464 6.14645ZM6.5 10H4.5V11H6.5V10ZM5 10.5V8.5H4V10.5H5Z"/></svg>
        </button>
        <button type="button" id="navigator-add-btn" class="navigator-edit-btn" title="Add project, list, or board" aria-label="Add project, list, or board" aria-haspopup="true" aria-expanded="false">
          <svg class="navigator-edit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" xmlns="http://www.w3.org/2000/svg"><path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <div id="navigator-add-popover" class="navigator-add-popover hidden" role="menu" aria-hidden="true">
          <button type="button" class="navigator-add-popover-item" data-choice="project">Project</button>
          <button type="button" class="navigator-add-popover-item" data-choice="list">List</button>
          <button type="button" class="navigator-add-popover-item" data-choice="board">Board</button>
        </div>
      </div>
    </aside>
    <main id="center-panel" class="panel center-panel">
      <div class="panel-header center-panel-header">
        <button type="button" id="center-refresh-btn" class="icon-btn" title="Refresh" aria-label="Refresh">
          <svg class="header-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M4.06189 13C4.02104 12.6724 4 12.3387 4 12C4 7.58172 7.58172 4 12 4C14.5006 4 16.7332 5.14727 18.2002 6.94416M19.9381 11C19.979 11.3276 20 11.6613 20 12C20 16.4183 16.4183 20 12 20C9.61061 20 7.46589 18.9525 6 17.2916M9 17H6V17.2916M18.2002 4V6.94416M18.2002 6.94416V6.99993L15.2002 7M6 20V17.2916"/></svg>
        </button>
        <h2 id="center-title">Tasks</h2>
        <div class="header-actions">
          <button type="button" id="display-settings-btn" class="icon-btn" title="Display settings" aria-label="Display settings" aria-haspopup="true" aria-expanded="false">
            <img src="assets/settings-04-svgrepo-com.svg" class="header-icon header-icon-settings" alt="" width="20" height="20" />
          </button>
          <div id="display-settings-dropdown" class="display-dropdown hidden" role="menu" aria-label="Task properties">
            <div class="display-dropdown-title">Visible columns</div>
            <div class="display-dropdown-flagged">
              <input type="checkbox" id="display-show-flagged" />
              <label for="display-show-flagged">Show focused</label>
            </div>
            <div class="display-dropdown-flagged">
              <input type="checkbox" id="display-show-completed" />
              <label for="display-show-completed">Show completed</label>
            </div>
            <div class="display-dropdown-flagged">
              <input type="checkbox" id="display-show-highlight-due" />
              <label for="display-show-highlight-due">Highlight due/overdue</label>
            </div>
            <div class="display-dropdown-flagged">
              <input type="checkbox" id="display-show-priority" />
              <label for="display-show-priority">Show priority</label>
            </div>
            <ul id="display-properties-list" class="display-properties-list"></ul>
            <div class="display-dropdown-title">Sort</div>
            <div class="display-dropdown-flagged">
              <input type="checkbox" id="display-manual-sort" />
              <label for="display-manual-sort">Manual sort</label>
            </div>
            <div class="display-sort-levels">
              <div id="display-sort-ladder" class="display-sort-ladder"></div>
              <button type="button" id="display-sort-add" class="display-sort-add">Add sort level</button>
            </div>
          </div>
        </div>
      </div>
      <div id="center-description" class="center-description"></div>
      <div class="panel-content" id="center-content">
        <p class="placeholder">Select a project or list from the left, or a task from here.</p>
      </div>
    </main>
    <aside id="right-panel" class="panel right-panel">
      <div class="panel-header">
        <h2 id="inspector-title">Inspector</h2>
      </div>
      <div class="panel-content inspector-content" id="inspector-content">
        <p class="placeholder">Select an item to inspect.</p>
      </div>
      <div class="chat-region" id="chat-region">
        <div class="chat-header-row">
          <button type="button" id="chat-clear" class="chat-clear-btn" title="Clear chat" aria-label="Clear chat">
            <svg class="chat-clear-icon" viewBox="0 0 1024 1024" width="16" height="16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6c-0.3 1.5-0.4 3-0.4 4.4 0 14.4 11.6 26 26 26h723c1.5 0 3-0.1 4.4-0.4 14.2-2.4 23.7-15.9 21.2-30zM204 390h272V182h72v208h272v104H204V390z m468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"/></svg>
          </button>
          <h3>Chat</h3>
        </div>
        <div class="chat-messages-wrap">
          <div class="chat-messages" id="chat-messages"></div>
          <div class="chat-typing" id="chat-typing" aria-live="polite">
            <span class="typing-dot"></span><span class="typing-dot"></span><span class="typing-dot"></span>
          </div>
        </div>
        <div class="chat-input-row">
          <input type="text" id="chat-input" placeholder="Message the model…" autocomplete="off" />
          <button type="button" id="chat-send" class="chat-send-btn" title="Send" aria-label="Send">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M11.5003 12H5.41872M5.24634 12.7972L4.24158 15.7986C3.69128 17.4424 3.41613 18.2643 3.61359 18.7704C3.78506 19.21 4.15335 19.5432 4.6078 19.6701C5.13111 19.8161 5.92151 19.4604 7.50231 18.7491L17.6367 14.1886C19.1797 13.4942 19.9512 13.1471 20.1896 12.6648C20.3968 12.2458 20.3968 11.7541 20.1896 11.3351C19.9512 10.8529 19.1797 10.5057 17.6367 9.81135L7.48483 5.24303C5.90879 4.53382 5.12078 4.17921 4.59799 4.32468C4.14397 4.45101 3.77572 4.78336 3.60365 5.22209C3.40551 5.72728 3.67772 6.54741 4.22215 8.18767L5.24829 11.2793C5.34179 11.561 5.38855 11.7019 5.407 11.8459C5.42338 11.9738 5.42321 12.1032 5.40651 12.231C5.38768 12.375 5.34057 12.5157 5.24634 12.7972Z"/></svg>
          </button>
        </div>
      </div>
    </aside>
    </div>

    <footer class="bottom-bar">
      <span id="connection-indicator" class="connection-indicator disconnected" title="Checking…" role="status" aria-label="Connection status">
        <svg class="connection-dot" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8"/></svg>
      </span>
      <button type="button" id="theme-btn" class="bar-btn" title="Cycle theme" aria-label="Cycle theme">
        <svg class="bar-icon" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M0 16q0 3.264 1.28 6.24t3.392 5.088 5.12 3.424 6.208 1.248q3.264 0 6.24-1.248t5.088-3.424 3.392-5.088 1.28-6.24-1.28-6.208-3.392-5.12-5.088-3.392-6.24-1.28q-3.264 0-6.208 1.28t-5.12 3.392-3.392 5.12-1.28 6.208zM4 16q0-3.264 1.6-6.016t4.384-4.352 6.016-1.632 6.016 1.632 4.384 4.352 1.6 6.016-1.6 6.048-4.384 4.352-6.016 1.6-6.016-1.6-4.384-4.352-1.6-6.048zM16 26.016q2.72 0 5.024-1.344t3.648-3.648 1.344-5.024-1.344-4.992-3.648-3.648-5.024-1.344v20z"/></svg>
      </button>
      <button type="button" id="settings-btn" class="bar-btn" title="Settings" aria-label="Settings">
        <svg class="bar-icon gear-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg">
          <path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z"/>
          <path d="M12.9046 3.06005C12.6988 3 12.4659 3 12 3C11.5341 3 11.3012 3 11.0954 3.06005C10.7942 3.14794 10.5281 3.32808 10.3346 3.57511C10.2024 3.74388 10.1159 3.96016 9.94291 4.39272C9.69419 5.01452 9.00393 5.33471 8.36857 5.123L7.79779 4.93281C7.3929 4.79785 7.19045 4.73036 6.99196 4.7188C6.70039 4.70181 6.4102 4.77032 6.15701 4.9159C5.98465 5.01501 5.83376 5.16591 5.53197 5.4677C5.21122 5.78845 5.05084 5.94882 4.94896 6.13189C4.79927 6.40084 4.73595 6.70934 4.76759 7.01551C4.78912 7.2239 4.87335 7.43449 5.04182 7.85566C5.30565 8.51523 5.05184 9.26878 4.44272 9.63433L4.16521 9.80087C3.74031 10.0558 3.52786 10.1833 3.37354 10.3588C3.23698 10.5141 3.13401 10.696 3.07109 10.893C3 11.1156 3 11.3658 3 11.8663C3 12.4589 3 12.7551 3.09462 13.0088C3.17823 13.2329 3.31422 13.4337 3.49124 13.5946C3.69158 13.7766 3.96395 13.8856 4.50866 14.1035C5.06534 14.3261 5.35196 14.9441 5.16236 15.5129L4.94721 16.1584C4.79819 16.6054 4.72367 16.829 4.7169 17.0486C4.70875 17.3127 4.77049 17.5742 4.89587 17.8067C5.00015 18.0002 5.16678 18.1668 5.5 18.5C5.83323 18.8332 5.99985 18.9998 6.19325 19.1041C6.4258 19.2295 6.68733 19.2913 6.9514 19.2831C7.17102 19.2763 7.39456 19.2018 7.84164 19.0528L8.36862 18.8771C9.00393 18.6654 9.6942 18.9855 9.94291 19.6073C10.1159 20.0398 10.2024 20.2561 10.3346 20.4249C10.5281 20.6719 10.7942 20.8521 11.0954 20.94C11.3012 21 11.5341 21 12 21C12.4659 21 12.6988 21 12.9046 20.94C13.2058 20.8521 13.4719 20.6719 13.6654 20.4249C13.7976 20.2561 13.8841 20.0398 14.0571 19.6073C14.3058 18.9855 14.9961 18.6654 15.6313 18.8773L16.1579 19.0529C16.605 19.2019 16.8286 19.2764 17.0482 19.2832C17.3123 19.2913 17.5738 19.2296 17.8063 19.1042C17.9997 18.9999 18.1664 18.8333 18.4996 18.5001C18.8328 18.1669 18.9994 18.0002 19.1037 17.8068C19.2291 17.5743 19.2908 17.3127 19.2827 17.0487C19.2759 16.8291 19.2014 16.6055 19.0524 16.1584L18.8374 15.5134C18.6477 14.9444 18.9344 14.3262 19.4913 14.1035C20.036 13.8856 20.3084 13.7766 20.5088 13.5946C20.6858 13.4337 20.8218 13.2329 20.9054 13.0088C21 12.7551 21 12.4589 21 11.8663C21 11.3658 21 11.1156 20.9289 10.893C20.866 10.696 20.763 10.5141 20.6265 10.3588C20.4721 10.1833 20.2597 10.0558 19.8348 9.80087L19.5569 9.63416C18.9478 9.26867 18.6939 8.51514 18.9578 7.85558C19.1262 7.43443 19.2105 7.22383 19.232 7.01543C19.2636 6.70926 19.2003 6.40077 19.0506 6.13181C18.9487 5.94875 18.7884 5.78837 18.4676 5.46762C18.1658 5.16584 18.0149 5.01494 17.8426 4.91583C17.5894 4.77024 17.2992 4.70174 17.0076 4.71872C16.8091 4.73029 16.6067 4.79777 16.2018 4.93273L15.6314 5.12287C14.9961 5.33464 14.3058 5.0145 14.0571 4.39272C13.8841 3.96016 13.7976 3.74388 13.6654 3.57511C13.4719 3.32808 13.2058 3.14794 12.9046 3.06005Z"/>
        </svg>
      </button>
      <div class="bar-spacer"></div>
      <div class="bottom-bar-center">
        <button type="button" id="navigator-add-task-btn" class="navigator-add-btn" title="Add task" aria-label="Add task">
          <svg class="navigator-add-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M8 12H12M12 12H16M12 12V16M12 12V8M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z"/></svg>
        </button>
        <input type="text" id="navigator-search-input" class="navigator-search-input" placeholder="Search or #tag" aria-label="Search tasks" maxlength="200" />
        <!-- Search icon: inline SVG with fill="currentColor" (from search asset) so it respects theme -->
        <button type="button" id="navigator-search-btn" class="navigator-search-btn" title="Search" aria-label="Search">
          <svg class="navigator-search-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866 14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078 19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976 20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z"/></svg>
        </button>
      </div>
      <div class="bar-spacer"></div>
      <button type="button" id="toggle-left" class="bar-btn" title="Toggle left panel" aria-label="Toggle left panel">
        <svg class="bar-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M28,4H4A2,2,0,0,0,2,6V26a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V6A2,2,0,0,0,28,4Zm0,22H12V6H28Z"/></svg>
      </button>
      <button type="button" id="toggle-right" class="bar-btn" title="Toggle right panel" aria-label="Toggle right panel">
        <svg class="bar-icon icon-flip" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M28,4H4A2,2,0,0,0,2,6V26a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V6A2,2,0,0,0,28,4Zm0,22H12V6H28Z"/></svg>
      </button>
    </footer>

    <div id="board-view" class="board-view hidden" aria-hidden="true">
      <div class="board-view-header">
        <h1 id="board-view-title" class="board-view-title"></h1>
        <div class="board-view-header-actions">
          <button type="button" id="board-duplicate-btn" class="board-header-btn" title="Duplicate board" aria-label="Duplicate board"><svg class="board-header-btn-icon" viewBox="64 42.67 384 427" fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><g transform="translate(64, 42.666667)"><path d="M320,128 L384,192 L384,426.666667 L128,426.666667 L128,128 L320,128 Z M302.314667,170.666667 L170.666667,170.666667 L170.666667,384 L341.333333,384 L341.333333,209.685333 L302.314667,170.666667 Z M277.333333,213.333333 L277.333,256 L320,256 L320,298.666667 L277.333,298.666 L277.333333,341.333333 L234.666667,341.333333 L234.666,298.666 L192,298.666667 L192,256 L234.666,256 L234.666667,213.333333 L277.333333,213.333333 Z M192,-2.13162821e-14 L256,64 L256,106.666 L213.333,106.666 L213.333333,81.6853333 L174.314667,42.6666667 L42.6666667,42.6666667 L42.6666667,256 L106.666,256 L106.666,298.666 L1.42108547e-14,298.666667 L1.42108547e-14,-2.13162821e-14 L192,-2.13162821e-14 Z"/></g></svg></button>
          <button type="button" id="board-delete-btn" class="board-header-btn board-delete-btn" title="Delete board" aria-label="Delete board"><svg class="board-header-btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M18 6L17.1991 18.0129C17.129 19.065 17.0939 19.5911 16.8667 19.99C16.6666 20.3412 16.3648 20.6235 16.0011 20.7998C15.588 21 15.0607 21 14.0062 21H9.99377C8.93927 21 8.41202 21 7.99889 20.7998C7.63517 20.6235 7.33339 20.3412 7.13332 19.99C6.90607 19.5911 6.871 19.065 6.80086 18.0129L6 6M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M14 10V17M10 10V17"/></svg></button>
        </div>
        <button type="button" id="board-view-close" class="board-view-close" title="Close board" aria-label="Close board"><svg class="board-view-close-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
      </div>
      <div id="board-view-canvas" class="board-view-canvas">
        <div id="board-canvas-inner" class="board-canvas-inner">
          <div id="board-grid-layer" class="board-grid-layer" aria-hidden="true"></div>
          <div id="board-regions-layer" class="board-regions-layer"></div>
          <div id="board-connections-layer" class="board-connections-layer"></div>
          <div id="board-cards-layer" class="board-cards-layer"></div>
        </div>
      </div>
      <div class="board-view-toolbar board-view-toolbar-left">
        <button type="button" id="board-add-task-btn" class="board-add-task-btn" title="Add task to board" aria-label="Add task to board">
          <svg class="board-add-task-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24"><path d="M12 5v14M5 12h14"/></svg>
        </button>
        <button type="button" id="board-add-region-btn" class="board-add-region-btn" title="Add region" aria-label="Add region">
          <svg class="board-add-region-icon" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M18.2513521,2.49820514 C19.9843968,2.49820514 21.4006513,3.85452629 21.4962634,5.56367469 L21.5014083,5.74810161 L21.5008077,17.7519229 C21.5005988,19.5467519 20.0455893,21.0018356 18.2507042,21.0018356 L6.25005624,21.0018356 C4.51701151,21.0018356 3.10075697,19.6455145 3.00514494,17.9363661 L3,17.7519391 L3.00060063,5.74811784 C3.00080955,3.9532889 4.45581897,2.49820514 6.25064792,2.49820514 L18.2513521,2.49820514 Z M11.5,9.49820514 L4.5,9.49920514 L4.50010353,17.7518667 L4.50727563,17.9125936 C4.58838653,18.803788 5.33765319,19.5018356 6.25,19.5018356 L11.5,19.5012051 L11.5,9.49820514 Z M20,15.4982051 L13,15.4992051 L13,19.5012051 L18.2506479,19.5018356 C19.2171619,19.5018356 20.0006952,18.7182622 20.0008077,17.7518046 L20,15.4982051 Z M18.2514083,3.99820514 L13,3.99720514 L13,13.9992051 L20,13.9982051 L20.0013048,5.74817408 L19.9941327,5.58744715 C19.9130218,4.69625278 19.1637551,3.99820514 18.2514083,3.99820514 Z M11.5,3.99720514 L6.25073228,3.99820514 L6.10723072,4.00401666 C5.20785168,4.0770851 4.5007075,4.83010139 4.50060063,5.7482362 L4.5,7.99920514 L11.5,7.99820514 L11.5,3.99720514 Z"/></svg>
        </button>
      </div>
      <div id="board-add-task-popover" class="board-add-task-popover hidden" role="listbox" aria-hidden="true">
        <div class="board-add-task-popover-title">Tasks not on board</div>
        <ul id="board-add-task-list" class="board-add-task-list"></ul>
      </div>
      <div class="board-view-zoom">
        <button type="button" id="board-theme-btn" class="board-zoom-btn board-theme-btn" title="Theme (click to cycle)" aria-label="Theme"><svg class="board-theme-icon" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M0 16q0 3.264 1.28 6.24t3.392 5.088 5.12 3.424 6.208 1.248q3.264 0 6.24-1.248t5.088-3.424 3.392-5.088 1.28-6.24-1.28-6.208-3.392-5.12-5.088-3.392-6.24-1.28q-3.264 0-6.208 1.28t-5.12 3.392-3.392 5.12-1.28 6.208zM4 16q0-3.264 1.6-6.016t4.384-4.352 6.016-1.632 6.016 1.632 4.384 4.352 1.6 6.016-1.6 6.048-4.384 4.352-6.016 1.6-6.016-1.6-4.384-4.352-1.6-6.048zM16 26.016q2.72 0 5.024-1.344t3.648-3.648 1.344-5.024-1.344-4.992-3.648-3.648-5.024-1.344v20z"/></svg></button>
        <button type="button" id="board-grid-btn" class="board-zoom-btn board-grid-btn" title="Toggle grid" aria-label="Toggle grid"><svg class="board-grid-icon" viewBox="0 0 8 8" fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M0 0v1h1V0H0zm2 0v1h1V0H2zm2 0v1h1V0H4zm2 0v1h1V0H6zM0 2v1h1V2H0zm2 0v1h1V2H2zm2 0v1h1V2H4zm2 0v1h1V2H6zM0 4v1h1V4H0zm2 0v1h1V4H2zm2 0v1h1V4H4zm2 0v1h1V4H6zM0 6v1h1V6H0zm2 0v1h1V6H2zm2 0v1h1V6H4zm2 0v1h1V6H6z"/></svg></button>
        <button type="button" id="board-zoom-out" class="board-zoom-btn" title="Zoom out" aria-label="Zoom out"><svg class="board-zoom-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><path d="M5 12h14"/></svg></button>
        <select id="board-zoom-select" class="board-zoom-select" title="Zoom level" aria-label="Zoom level">
          <option value="25">25%</option>
          <option value="50">50%</option>
          <option value="75">75%</option>
          <option value="100" selected>100%</option>
          <option value="125">125%</option>
          <option value="150">150%</option>
          <option value="200">200%</option>
          <option value="300">300%</option>
        </select>
        <button type="button" id="board-zoom-in" class="board-zoom-btn" title="Zoom in" aria-label="Zoom in"><svg class="board-zoom-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="16" height="16"><path d="M12 5v14M5 12h14"/></svg></button>
      </div>
    </div>
  </div>

  <div id="board-region-edit-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="board-region-edit-title">
      <div class="modal-header">
        <h2 id="board-region-edit-title">Region</h2>
        <button type="button" id="board-region-edit-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-row">
          <label for="board-region-edit-title-input">Title</label>
          <input type="text" id="board-region-edit-title-input" class="inspector-edit-input" placeholder="Region title" aria-label="Region title" />
        </div>
        <div class="setting-row">
          <label>Color</label>
          <div id="board-region-edit-colors" class="board-region-color-palette" role="group" aria-label="Region color"></div>
        </div>
        <div class="setting-row board-region-edit-checkboxes">
          <label class="setting-checkbox-label">
            <input type="checkbox" id="board-region-edit-show-priority" class="board-region-edit-checkbox" aria-label="Show priority on snapped tasks" />
            <span>Show priority</span>
          </label>
          <label class="setting-checkbox-label">
            <input type="checkbox" id="board-region-edit-show-flag" class="board-region-edit-checkbox" aria-label="Show flag on snapped tasks" />
            <span>Show flag</span>
          </label>
        </div>
      </div>
      <div class="modal-footer board-region-edit-footer">
        <button type="button" id="board-region-edit-delete" class="board-region-edit-delete" title="Delete region" aria-label="Delete region"></button>
        <button type="button" id="board-region-edit-duplicate" class="board-region-edit-duplicate" title="Duplicate region" aria-label="Duplicate region"></button>
        <button type="button" id="board-region-edit-save" class="board-region-edit-save" title="Save" aria-label="Save"></button>
      </div>
    </div>
  </div>
  <div id="board-task-inspector-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-board-inspector" role="dialog" aria-labelledby="board-task-inspector-title">
      <div class="modal-header">
        <h2 id="board-task-inspector-title">Task</h2>
        <button type="button" id="board-task-inspector-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body modal-body-scroll">
        <div id="board-task-inspector-content" class="inspector-content-inner"></div>
      </div>
    </div>
  </div>

  <div id="settings-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-labelledby="settings-title">
      <div class="modal-header">
        <h2 id="settings-title">Settings</h2>
        <button type="button" id="settings-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <section class="settings-section">
          <h3>Connection</h3>
          <div class="setting-row">
            <label for="settings-api-base">API base URL</label>
            <input type="url" id="settings-api-base" placeholder="http://localhost:8081" />
          </div>
          <div class="setting-row">
            <label for="settings-api-key">API key</label>
            <input type="password" id="settings-api-key" placeholder="From Spaztick web UI → External API" autocomplete="off" />
          </div>
        </section>
        <section class="settings-section">
          <h3>When opening the app</h3>
          <div class="setting-row">
            <label for="settings-default-open-view">Show</label>
            <select id="settings-default-open-view">
              <option value="inbox">Inbox</option>
            </select>
          </div>
        </section>
        <section class="settings-section">
          <h3>Display</h3>
          <div class="setting-row setting-row-checkbox">
            <input type="checkbox" id="settings-show-due-overdue-counts" />
            <label for="settings-show-due-overdue-counts">Show # of due and overdue tasks in lefthand panel</label>
          </div>
          <div class="setting-row">
            <label for="settings-task-list-separator">In task lists, separate tasks</label>
            <select id="settings-task-list-separator">
              <option value="none">Nothing</option>
              <option value="dotted">Dotted line</option>
              <option value="shading">Alternating shading</option>
            </select>
          </div>
          <div class="setting-row">
            <label for="settings-date-format">Date format</label>
            <div class="date-format-setting">
              <select id="settings-date-format">
                <option value="short">Short (MM/DD/YYYY)</option>
                <option value="short-eu">Short (DD/MM/YYYY)</option>
                <option value="short-iso">Short (YYYY-MM-DD)</option>
                <option value="medium">Medium (e.g. Jan 15, 2025)</option>
                <option value="long">Long (e.g. January 15, 2025)</option>
                <option value="custom">Custom…</option>
              </select>
              <button type="button" id="custom-format-edit-btn" class="btn-secondary custom-format-edit-btn hidden" aria-label="Edit custom format">Edit custom…</button>
            </div>
          </div>
        </section>
        <section class="settings-section">
          <h3>Archived projects</h3>
          <div class="setting-row">
            <button type="button" id="settings-view-archived-projects" class="btn-secondary">View archived projects</button>
          </div>
        </section>
        <section class="settings-section">
          <h3>Data</h3>
          <p class="setting-hint">App data (settings, boards, favorites, layout) is stored on this computer. Export to back up or move to another computer; import to restore.</p>
          <div class="setting-row">
            <button type="button" id="settings-export-data" class="btn-secondary">Export app data…</button>
            <button type="button" id="settings-import-data" class="btn-secondary">Import app data…</button>
          </div>
          <input type="file" id="settings-import-data-file" accept=".json,application/json" class="hidden" aria-hidden="true" />
        </section>
      </div>
      <div class="modal-footer">
        <button type="button" id="settings-save" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <div id="archived-projects-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="archived-projects-title">
      <div class="modal-header">
        <h2 id="archived-projects-title">Archived projects</h2>
        <button type="button" id="archived-projects-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div id="archived-projects-list" class="archived-projects-list"></div>
      </div>
    </div>
  </div>

  <div id="new-task-modal-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-new-task" role="dialog" aria-labelledby="new-task-modal-title" aria-modal="true">
      <div class="modal-header">
        <h2 id="new-task-modal-title">New task</h2>
        <button type="button" id="new-task-modal-close" class="modal-close" aria-label="Cancel">&times;</button>
      </div>
      <div class="modal-body modal-body-scroll">
        <div id="new-task-modal-content"></div>
      </div>
      <div class="modal-footer">
        <button type="button" id="new-task-modal-save" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <div id="description-modal-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-description" role="dialog" aria-labelledby="description-modal-title">
      <div class="modal-header">
        <h2 id="description-modal-title">Description</h2>
        <button type="button" id="description-modal-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body description-modal-body">
        <div id="description-notes-editor" class="description-notes-editor">
          <textarea id="description-edit-textarea" class="description-edit-textarea" placeholder="Add a description (Markdown: # heading, - [ ] checkbox, **bold**, #tag)…" aria-label="Notes"></textarea>
          <div id="description-notes-lines" class="description-notes-preview description-notes-lines" aria-live="polite">Type above to see a live preview.</div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="description-modal-save" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <div id="new-project-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="new-project-title">
      <div class="modal-header">
        <h2 id="new-project-title">New project</h2>
        <button type="button" id="new-project-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-row">
          <label for="new-project-name">Name</label>
          <input type="text" id="new-project-name" placeholder="Project name" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="new-project-create" class="btn-primary">Create</button>
      </div>
    </div>
  </div>

  <div id="new-list-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="new-list-title">
      <div class="modal-header">
        <h2 id="new-list-title">New list</h2>
        <button type="button" id="new-list-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-row">
          <label for="new-list-name">Name</label>
          <input type="text" id="new-list-name" placeholder="List name" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="new-list-create" class="btn-primary">Create</button>
      </div>
    </div>
  </div>

  <div id="new-board-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="new-board-title">
      <div class="modal-header">
        <h2 id="new-board-title">New board</h2>
        <button type="button" id="new-board-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-row">
          <label for="new-board-name">Name</label>
          <input type="text" id="new-board-name" placeholder="Board name" />
        </div>
        <div class="setting-row">
          <label for="new-board-base">Based on</label>
          <select id="new-board-base" aria-label="List or project to base this board on">
            <option value="">— Select a list or project —</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="new-board-create" class="btn-primary">Create</button>
      </div>
    </div>
  </div>

  <div id="duplicate-list-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="duplicate-list-title">
      <div class="modal-header">
        <h2 id="duplicate-list-title">Duplicate list</h2>
        <button type="button" id="duplicate-list-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="setting-row">
          <label for="duplicate-list-name">Name</label>
          <input type="text" id="duplicate-list-name" placeholder="List name" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="duplicate-list-create" class="btn-primary">Create</button>
      </div>
    </div>
  </div>

  <div id="list-settings-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-list-settings" role="dialog" aria-labelledby="list-settings-title" aria-modal="true">
      <div class="modal-header">
        <h2 id="list-settings-title">List filter &amp; sort</h2>
        <button type="button" id="list-settings-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body modal-body-scroll">
        <section class="list-settings-section">
          <h3 class="list-settings-section-title">Filters</h3>
          <p class="setting-hint">Group conditions with AND/OR. Add groups to nest. Dates: type an expression (e.g. today, today+3) or use the date picker.</p>
          <div id="list-settings-filters" class="list-settings-filters"></div>
        </section>
        <section class="list-settings-section">
          <h3 class="list-settings-section-title">Visible columns</h3>
          <div class="list-settings-columns-options">
            <div class="list-settings-flagged">
              <input type="checkbox" id="list-settings-show-flagged" />
              <label for="list-settings-show-flagged">Show focused</label>
            </div>
            <div class="list-settings-flagged">
              <input type="checkbox" id="list-settings-show-completed" />
              <label for="list-settings-show-completed">Show completed</label>
            </div>
            <div class="list-settings-flagged">
              <input type="checkbox" id="list-settings-show-highlight-due" />
              <label for="list-settings-show-highlight-due">Highlight due/overdue</label>
            </div>
            <div class="list-settings-flagged">
              <input type="checkbox" id="list-settings-show-priority" />
              <label for="list-settings-show-priority">Show priority</label>
            </div>
          </div>
          <ul id="list-settings-columns" class="list-settings-columns" aria-label="Visible columns"></ul>
        </section>
        <section class="list-settings-section">
          <h3 class="list-settings-section-title">Sort</h3>
          <div id="list-settings-sort" class="list-settings-sort"></div>
          <button type="button" id="list-settings-add-sort" class="btn-secondary btn-sm">Add sort level</button>
        </section>
      </div>
      <div class="modal-footer">
        <button type="button" id="list-settings-save" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <div id="recurrence-modal-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-recurrence" role="dialog" aria-labelledby="recurrence-modal-title" aria-modal="true">
      <div class="modal-header">
        <h2 id="recurrence-modal-title">Recurrence</h2>
        <button type="button" id="recurrence-modal-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body modal-body-scroll">
        <p id="recurrence-no-due-date-msg" class="recurrence-no-due-date-msg hidden">Set a due date for this task before setting recurrence.</p>
        <div id="recurrence-form-body">
        <div class="setting-row">
          <label for="recurrence-anchor">Complete from</label>
          <select id="recurrence-anchor">
            <option value="scheduled">Scheduled date</option>
            <option value="completed">Completed date</option>
          </select>
        </div>
        <div class="setting-row">
          <label for="recurrence-freq">Frequency</label>
          <select id="recurrence-freq">
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
            <option value="yearly">Yearly</option>
          </select>
        </div>
        <div class="setting-row recurrence-interval-row">
          <label for="recurrence-interval">Every</label>
          <input type="number" id="recurrence-interval" min="1" value="1" class="recurrence-interval-input" aria-label="Interval" />
          <span id="recurrence-interval-unit" class="recurrence-interval-unit">days</span>
        </div>
        <div id="recurrence-weekly-options" class="recurrence-freq-options hidden">
          <div class="setting-label">On days</div>
          <div class="recurrence-weekdays">
            <label><input type="checkbox" data-day="0" /> Sun</label>
            <label><input type="checkbox" data-day="1" /> Mon</label>
            <label><input type="checkbox" data-day="2" /> Tue</label>
            <label><input type="checkbox" data-day="3" /> Wed</label>
            <label><input type="checkbox" data-day="4" /> Thu</label>
            <label><input type="checkbox" data-day="5" /> Fri</label>
            <label><input type="checkbox" data-day="6" /> Sat</label>
          </div>
        </div>
        <div id="recurrence-monthly-options" class="recurrence-freq-options hidden">
          <div class="recurrence-monthly-choices">
            <div class="setting-row recurrence-monthly-row">
              <label class="recurrence-radio-label">
                <input type="radio" name="recurrence-monthly-rule" value="day_of_month" />
                <span class="recurrence-monthly-label-text recurrence-monthly-label-date">On date:</span>
              </label>
              <input type="number" id="recurrence-monthly-day" min="1" max="31" value="1" class="recurrence-monthly-day-input" aria-label="Day of month" />
            </div>
            <div class="setting-row recurrence-monthly-row">
              <label class="recurrence-radio-label">
                <input type="radio" name="recurrence-monthly-rule" value="weekday_of_month" />
                <span class="recurrence-monthly-label-text">On</span>
              </label>
              <select id="recurrence-monthly-week" class="recurrence-monthly-picker" aria-label="Week of month">
                <option value="1">First</option>
                <option value="2">Second</option>
                <option value="3">Third</option>
                <option value="4">Fourth</option>
                <option value="5">Last</option>
              </select>
              <select id="recurrence-monthly-weekday" class="recurrence-monthly-picker" aria-label="Day of week">
                <option value="0">Sunday</option>
                <option value="1">Monday</option>
                <option value="2">Tuesday</option>
                <option value="3">Wednesday</option>
                <option value="4">Thursday</option>
                <option value="5">Friday</option>
                <option value="6">Saturday</option>
              </select>
            </div>
          </div>
        </div>
        <div id="recurrence-yearly-options" class="recurrence-freq-options hidden">
          <div class="setting-row recurrence-row-inline">
            <span class="recurrence-yearly-label">Occur again on</span>
            <select id="recurrence-yearly-month">
              <option value="1">January</option><option value="2">February</option><option value="3">March</option>
              <option value="4">April</option><option value="5">May</option><option value="6">June</option>
              <option value="7">July</option><option value="8">August</option><option value="9">September</option>
              <option value="10">October</option><option value="11">November</option><option value="12">December</option>
            </select>
            <input type="number" id="recurrence-yearly-day" min="1" max="31" value="1" />
          </div>
        </div>
        <section class="recurrence-end-section">
          <h3 class="recurrence-section-title">End</h3>
          <div class="recurrence-end-choices">
            <div class="setting-row recurrence-end-row">
              <label class="recurrence-radio-label">
                <input type="radio" name="recurrence-end" value="never" checked />
                <span class="recurrence-end-label-text">Never</span>
              </label>
            </div>
            <div class="setting-row recurrence-end-row">
              <label class="recurrence-radio-label">
                <input type="radio" name="recurrence-end" value="after_count" />
                <span class="recurrence-end-label-text">After</span>
              </label>
              <input type="number" id="recurrence-end-after-count" min="1" value="5" class="recurrence-end-count-input" aria-label="Number of times" />
              <span class="recurrence-end-suffix">times</span>
            </div>
            <div class="setting-row recurrence-end-row">
              <label class="recurrence-radio-label">
                <input type="radio" name="recurrence-end" value="end_date" />
                <span class="recurrence-end-label-text">On</span>
              </label>
              <input type="date" id="recurrence-end-date" class="recurrence-end-date-input" aria-label="End date" />
            </div>
          </div>
        </section>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" id="recurrence-clear-and-save" class="btn-secondary">Clear and Save</button>
        <button type="button" id="recurrence-modal-save" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <div id="custom-date-format-overlay" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal modal-small" role="dialog" aria-labelledby="custom-format-title">
      <div class="modal-header">
        <h2 id="custom-format-title">Custom date format</h2>
        <button type="button" id="custom-format-close" class="modal-close" aria-label="Close">&times;</button>
      </div>
      <div class="modal-body">
        <p class="setting-hint">Use placeholders: <strong>YYYY</strong> = year, <strong>MM</strong> or <strong>M</strong> = month, <strong>DD</strong> or <strong>D</strong> = day. <strong>MMM</strong> = short month (Jan), <strong>MMMM</strong> = full month (January).</p>
        <div class="setting-row">
          <label for="custom-format-input">Format pattern</label>
          <input type="text" id="custom-format-input" placeholder="e.g. YYYY-MM-DD or DD/MM/YYYY" />
        </div>
        <p class="setting-hint example">Example: <span id="custom-format-preview">—</span></p>
      </div>
      <div class="modal-footer">
        <button type="button" id="custom-format-save" class="btn-primary">Save</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
